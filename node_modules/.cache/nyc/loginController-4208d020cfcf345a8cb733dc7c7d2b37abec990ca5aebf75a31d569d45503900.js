function cov_1wzxltwp7q(){var path="/home/murilorsv21/Projects/sd-010-b-cookmaster/src/controller/loginController.js";var hash="9c6d5d7ad8073edf4523cca97cd450806ee6d30d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/murilorsv21/Projects/sd-010-b-cookmaster/src/controller/loginController.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:55}},"1":{start:{line:2,column:12},end:{line:2,column:35}},"2":{start:{line:3,column:16},end:{line:3,column:50}},"3":{start:{line:5,column:15},end:{line:5,column:27}},"4":{start:{line:7,column:18},end:{line:10,column:1}},"5":{start:{line:12,column:19},end:{line:16,column:1}},"6":{start:{line:13,column:2},end:{line:15,column:3}},"7":{start:{line:14,column:4},end:{line:14,column:95}},"8":{start:{line:18,column:29},end:{line:22,column:1}},"9":{start:{line:19,column:2},end:{line:21,column:3}},"10":{start:{line:20,column:4},end:{line:20,column:90}},"11":{start:{line:24,column:22},end:{line:38,column:1}},"12":{start:{line:25,column:30},end:{line:25,column:38}},"13":{start:{line:27,column:2},end:{line:27,column:45}},"14":{start:{line:29,column:15},end:{line:29,column:53}},"15":{start:{line:31,column:2},end:{line:31,column:24}},"16":{start:{line:33,column:16},end:{line:33,column:59}},"17":{start:{line:35,column:2},end:{line:37,column:66}},"18":{start:{line:40,column:0},end:{line:42,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:19},end:{line:12,column:20}},loc:{start:{line:12,column:34},end:{line:16,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:29},end:{line:18,column:30}},loc:{start:{line:18,column:52},end:{line:22,column:1}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:24,column:22},end:{line:24,column:23}},loc:{start:{line:24,column:42},end:{line:38,column:1}},line:24}},branchMap:{"0":{loc:{start:{line:13,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:13,column:2},end:{line:15,column:3}},{start:{line:13,column:2},end:{line:15,column:3}}],line:13},"1":{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:19,column:2},end:{line:21,column:3}}],line:19},"2":{loc:{start:{line:19,column:6},end:{line:19,column:22}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:12}},{start:{line:19,column:16},end:{line:19,column:22}}],line:19},"3":{loc:{start:{line:35,column:9},end:{line:37,column:65}},type:"cond-expr",locations:[{start:{line:36,column:6},end:{line:36,column:43}},{start:{line:37,column:6},end:{line:37,column:65}}],line:35}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9c6d5d7ad8073edf4523cca97cd450806ee6d30d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1wzxltwp7q=function(){return actualCoverage;};}return actualCoverage;}cov_1wzxltwp7q();const status=(cov_1wzxltwp7q().s[0]++,require('http-status-codes').StatusCodes);const jwt=(cov_1wzxltwp7q().s[1]++,require('jsonwebtoken'));const service=(cov_1wzxltwp7q().s[2]++,require('../service/loginService'));const secret=(cov_1wzxltwp7q().s[3]++,'segredinho');const JWTConfig=(cov_1wzxltwp7q().s[4]++,{expiresIn:'1hr',algorithm:'HS256'});cov_1wzxltwp7q().s[5]++;const verifyUser=(user,res)=>{cov_1wzxltwp7q().f[0]++;cov_1wzxltwp7q().s[6]++;if(!user){cov_1wzxltwp7q().b[0][0]++;cov_1wzxltwp7q().s[7]++;return res.status(status.UNAUTHORIZED).json({message:'Incorrect username or password'});}else{cov_1wzxltwp7q().b[0][1]++;}};cov_1wzxltwp7q().s[8]++;const verifyEMailPassaword=(email,senha,res)=>{cov_1wzxltwp7q().f[1]++;cov_1wzxltwp7q().s[9]++;if((cov_1wzxltwp7q().b[2][0]++,!email)||(cov_1wzxltwp7q().b[2][1]++,!senha)){cov_1wzxltwp7q().b[1][0]++;cov_1wzxltwp7q().s[10]++;return res.status(status.UNAUTHORIZED).json({message:'All fields must be filled'});}else{cov_1wzxltwp7q().b[1][1]++;}};cov_1wzxltwp7q().s[11]++;const validateLogin=async(req,res)=>{cov_1wzxltwp7q().f[2]++;const{email,password}=(cov_1wzxltwp7q().s[12]++,req.body);cov_1wzxltwp7q().s[13]++;verifyEMailPassaword(email,password,res);const user=(cov_1wzxltwp7q().s[14]++,await service.getUser(email,password));cov_1wzxltwp7q().s[15]++;verifyUser(user,res);const token=(cov_1wzxltwp7q().s[16]++,jwt.sign({data:user},secret,JWTConfig));cov_1wzxltwp7q().s[17]++;return token?(cov_1wzxltwp7q().b[3][0]++,res.status(status.OK).json({token})):(cov_1wzxltwp7q().b[3][1]++,res.status(status.NOT_FOUND).json({message:'Json null'}));};cov_1wzxltwp7q().s[18]++;module.exports={validateLogin};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJzdGF0dXMiLCJyZXF1aXJlIiwiU3RhdHVzQ29kZXMiLCJqd3QiLCJzZXJ2aWNlIiwic2VjcmV0IiwiSldUQ29uZmlnIiwiZXhwaXJlc0luIiwiYWxnb3JpdGhtIiwidmVyaWZ5VXNlciIsInVzZXIiLCJyZXMiLCJVTkFVVEhPUklaRUQiLCJqc29uIiwibWVzc2FnZSIsInZlcmlmeUVNYWlsUGFzc2F3b3JkIiwiZW1haWwiLCJzZW5oYSIsInZhbGlkYXRlTG9naW4iLCJyZXEiLCJwYXNzd29yZCIsImJvZHkiLCJnZXRVc2VyIiwidG9rZW4iLCJzaWduIiwiZGF0YSIsIk9LIiwiTk9UX0ZPVU5EIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6ImdpR0FlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsbUJBQUQsQ0FBUCxDQUE2QkMsV0FBaEMsQ0FBWixDQUNBLEtBQU1DLENBQUFBLEdBQUcsMEJBQUdGLE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1HLENBQUFBLE9BQU8sMEJBQUdILE9BQU8sQ0FBQyx5QkFBRCxDQUFWLENBQWIsQ0FFQSxLQUFNSSxDQUFBQSxNQUFNLDBCQUFHLFlBQUgsQ0FBWixDQUVBLEtBQU1DLENBQUFBLFNBQVMsMEJBQUcsQ0FDaEJDLFNBQVMsQ0FBRSxLQURLLENBRWhCQyxTQUFTLENBQUUsT0FGSyxDQUFILENBQWYsQyx3QkFLQSxLQUFNQyxDQUFBQSxVQUFVLENBQUcsQ0FBQ0MsSUFBRCxDQUFPQyxHQUFQLEdBQWUsaURBQ2hDLEdBQUksQ0FBQ0QsSUFBTCxDQUFXLG9EQUNULE1BQU9DLENBQUFBLEdBQUcsQ0FBQ1gsTUFBSixDQUFXQSxNQUFNLENBQUNZLFlBQWxCLEVBQWdDQyxJQUFoQyxDQUFxQyxDQUFFQyxPQUFPLENBQUUsZ0NBQVgsQ0FBckMsQ0FBUCxDQUNELENBRkQsaUNBR0QsQ0FKRCxDLHdCQU1BLEtBQU1DLENBQUFBLG9CQUFvQixDQUFHLENBQUNDLEtBQUQsQ0FBUUMsS0FBUixDQUFlTixHQUFmLEdBQXVCLGlEQUNsRCxHQUFJLDZCQUFDSyxLQUFELCtCQUFVLENBQUNDLEtBQVgsQ0FBSixDQUFzQixxREFDcEIsTUFBT04sQ0FBQUEsR0FBRyxDQUFDWCxNQUFKLENBQVdBLE1BQU0sQ0FBQ1ksWUFBbEIsRUFBZ0NDLElBQWhDLENBQXFDLENBQUVDLE9BQU8sQ0FBRSwyQkFBWCxDQUFyQyxDQUFQLENBQ0QsQ0FGRCxpQ0FHRCxDQUpELEMseUJBTUEsS0FBTUksQ0FBQUEsYUFBYSxDQUFHLE1BQU9DLEdBQVAsQ0FBWVIsR0FBWixHQUFvQix5QkFDeEMsS0FBTSxDQUFFSyxLQUFGLENBQVNJLFFBQVQsNEJBQXNCRCxHQUFHLENBQUNFLElBQTFCLENBQU4sQ0FEd0MseUJBR3hDTixvQkFBb0IsQ0FBQ0MsS0FBRCxDQUFRSSxRQUFSLENBQWtCVCxHQUFsQixDQUFwQixDQUVBLEtBQU1ELENBQUFBLElBQUksMkJBQUcsS0FBTU4sQ0FBQUEsT0FBTyxDQUFDa0IsT0FBUixDQUFnQk4sS0FBaEIsQ0FBdUJJLFFBQXZCLENBQVQsQ0FBVixDQUx3Qyx5QkFPeENYLFVBQVUsQ0FBQ0MsSUFBRCxDQUFPQyxHQUFQLENBQVYsQ0FFQSxLQUFNWSxDQUFBQSxLQUFLLDJCQUFHcEIsR0FBRyxDQUFDcUIsSUFBSixDQUFTLENBQUVDLElBQUksQ0FBRWYsSUFBUixDQUFULENBQXlCTCxNQUF6QixDQUFpQ0MsU0FBakMsQ0FBSCxDQUFYLENBVHdDLHlCQVd4QyxNQUFPaUIsQ0FBQUEsS0FBSyw2QkFDUlosR0FBRyxDQUFDWCxNQUFKLENBQVdBLE1BQU0sQ0FBQzBCLEVBQWxCLEVBQXNCYixJQUF0QixDQUEyQixDQUFFVSxLQUFGLENBQTNCLENBRFEsOEJBRVJaLEdBQUcsQ0FBQ1gsTUFBSixDQUFXQSxNQUFNLENBQUMyQixTQUFsQixFQUE2QmQsSUFBN0IsQ0FBa0MsQ0FBRUMsT0FBTyxDQUFFLFdBQVgsQ0FBbEMsQ0FGUSxDQUFaLENBR0QsQ0FkRCxDLHlCQWdCQWMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2ZYLGFBRGUsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdGF0dXMgPSByZXF1aXJlKCdodHRwLXN0YXR1cy1jb2RlcycpLlN0YXR1c0NvZGVzO1xuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5jb25zdCBzZXJ2aWNlID0gcmVxdWlyZSgnLi4vc2VydmljZS9sb2dpblNlcnZpY2UnKTtcblxuY29uc3Qgc2VjcmV0ID0gJ3NlZ3JlZGluaG8nO1xuXG5jb25zdCBKV1RDb25maWcgPSB7XG4gIGV4cGlyZXNJbjogJzFocicsXG4gIGFsZ29yaXRobTogJ0hTMjU2Jyxcbn07XG5cbmNvbnN0IHZlcmlmeVVzZXIgPSAodXNlciwgcmVzKSA9PiB7XG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKHN0YXR1cy5VTkFVVEhPUklaRUQpLmpzb24oeyBtZXNzYWdlOiAnSW5jb3JyZWN0IHVzZXJuYW1lIG9yIHBhc3N3b3JkJyB9KTtcbiAgfVxufTtcblxuY29uc3QgdmVyaWZ5RU1haWxQYXNzYXdvcmQgPSAoZW1haWwsIHNlbmhhLCByZXMpID0+IHtcbiAgaWYgKCFlbWFpbCB8fCAhc2VuaGEpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhzdGF0dXMuVU5BVVRIT1JJWkVEKS5qc29uKHsgbWVzc2FnZTogJ0FsbCBmaWVsZHMgbXVzdCBiZSBmaWxsZWQnIH0pO1xuICB9XG59O1xuXG5jb25zdCB2YWxpZGF0ZUxvZ2luID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICB2ZXJpZnlFTWFpbFBhc3Nhd29yZChlbWFpbCwgcGFzc3dvcmQsIHJlcyk7XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IHNlcnZpY2UuZ2V0VXNlcihlbWFpbCwgcGFzc3dvcmQpO1xuXG4gIHZlcmlmeVVzZXIodXNlciwgcmVzKTtcblxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgZGF0YTogdXNlciB9LCBzZWNyZXQsIEpXVENvbmZpZyk7XG5cbiAgcmV0dXJuIHRva2VuXG4gICAgPyByZXMuc3RhdHVzKHN0YXR1cy5PSykuanNvbih7IHRva2VuIH0pXG4gICAgOiByZXMuc3RhdHVzKHN0YXR1cy5OT1RfRk9VTkQpLmpzb24oeyBtZXNzYWdlOiAnSnNvbiBudWxsJyB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB2YWxpZGF0ZUxvZ2luLFxufTsiXX0=